# 3Dサイコロアプリ 要件定義書

## プロジェクト概要
スマートフォン向けの3Dサイコロを振ることができるシンプルなWebアプリケーション

## 基本要件

### 機能要件
1. **3Dサイコロの表示**
   - リアルな3Dサイコロのビジュアル表現
   - 6面体のサイコロ（1-6の目）
   - 適切な質感とライティング

2. **サイコロを振る機能**
   - タップ/スワイプでサイコロを振る
   - 物理的な回転アニメーション
   - ランダムな結果の表示

3. **結果表示**
   - 出た目の数値を明確に表示
   - アニメーション完了後の結果表示

4. **複数サイコロ対応**
   - 1-6個のサイコロを同時に振る
   - 各サイコロの個別結果と合計値の表示

### 非機能要件

#### パフォーマンス
- スマートフォンでスムーズに動作（60FPS）
- 軽量な3Dレンダリング
- バッテリー消費を抑えた実装

#### ユーザビリティ
- 直感的な操作（タップで振る）
- レスポンシブデザイン（縦横対応）
- アクセシビリティ対応

#### 互換性
- モダンブラウザ対応（Chrome、Safari、Firefox）
- スマートフォン最適化
- PWA対応（オフライン利用可能）

## 技術仕様

### フロントエンド技術
- **3Dレンダリング**: Three.js
- **言語**: TypeScript
- **ビルドツール**: Vite
- **スタイリング**: CSS3（CSS Grid/Flexbox）
- **物理エンジン**: Cannon.js または Matter.js

### アーキテクチャ
- コンポーネントベースの設計
- 状態管理（サイコロの状態、アニメーション状態）
- イベント駆動のアニメーション制御

## 画面設計

### メイン画面
- 3Dサイコロの表示エリア（画面中央）
- サイコロの個数選択（1-6個）
- 「振る」ボタン
- 結果表示エリア
- リセットボタン

### レスポンシブ対応
- 縦画面：サイコロ表示エリアを最大化
- 横画面：サイコロとコントロールを横並び配置

## アニメーション仕様

### サイコロを振るアニメーション
1. **開始**: タップ検知
2. **回転**: ランダムな軸での回転（1-3秒）
3. **減速**: 自然な減速カーブ
4. **停止**: 最終的な面の表示
5. **結果表示**: 数値のハイライト

### 物理シミュレーション
- 重力の適用
- 床との衝突検知
- 摩擦による減速
- ランダムな初期速度と回転

## データ構造

### サイコロオブジェクト
```typescript
interface Dice {
  id: string;
  value: number;
  position: Vector3;
  rotation: Vector3;
  isRolling: boolean;
}
```

### ゲーム状態
```typescript
interface GameState {
  dices: Dice[];
  isRolling: boolean;
  results: number[];
  total: number;
}
```

## 品質要件

### テスト要件
- ユニットテスト（物理計算、ランダム生成）
- 統合テスト（アニメーション、イベント）
- パフォーマンステスト（フレームレート）

### セキュリティ
- XSS対策
- 入力値検証
- 安全なランダム生成

## 開発フェーズ

### Phase 1: 基本機能
- 単一サイコロの3D表示
- 基本的な振るアニメーション
- 結果表示

### Phase 2: 拡張機能
- 複数サイコロ対応
- 物理シミュレーション強化
- UI改善

### Phase 3: 最適化
- パフォーマンス最適化
- PWA対応
- アクセシビリティ向上

## 成功指標

### 技術指標
- フレームレート: 60FPS維持
- ロード時間: 3秒以内
- メモリ使用量: 100MB以下

### ユーザビリティ指標
- 直感的な操作（学習コストなし）
- レスポンシブ対応（各種デバイス）
- アクセシビリティ（スクリーンリーダー対応）

## 制約事項

### 技術制約
- モバイルブラウザの制限
- 3Dレンダリングの性能制約
- バッテリー消費の考慮

### デザイン制約
- シンプルで直感的なUI
- 軽量な実装
- クロスプラットフォーム対応

## 今後の拡張可能性

### 追加機能候補
- カスタムサイコロ（異なる面数）
- サイコロの色・質感カスタマイズ
- 履歴機能
- 統計表示
- 音響効果
- ハプティックフィードバック

### 技術的拡張
- WebXR対応（AR/VR）
- マルチプレイヤー機能
- クラウド同期
- オフライン機能強化
